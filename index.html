<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RH Enterprise System - PROD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 font-sans text-gray-800 h-screen flex overflow-hidden">

    <div id="login-screen" class="fixed inset-0 bg-slate-900 z-50 flex flex-col justify-center items-center text-white">
        </div>

    <aside id="sidebar" class="hidden md:flex flex-col w-64 bg-slate-900 text-white flex-shrink-0 h-full absolute md:relative z-40">
        </aside>

    <main id="main-container" class="flex-1 flex flex-col h-full overflow-hidden w-full relative bg-gray-50">
        <header id="mobile-header" class="md:hidden bg-slate-900 text-white p-4 flex justify-between items-center shadow no-print">
            <h1 class="font-bold">RH Enterprise</h1>
            <button onclick="document.getElementById('sidebar').classList.toggle('hidden'); document.getElementById('sidebar').classList.toggle('absolute'); document.getElementById('sidebar').classList.toggle('h-full');"><i class="fa-solid fa-bars"></i></button>
        </header>
        <div id="app-content" class="flex-1 overflow-y-auto p-4 md:p-8 relative">
            <div class="flex justify-center mt-20"><div class="loader"></div></div>
        </div>
    </main>

    <template id="dashboard-template">
        <h1 class="text-3xl font-bold mb-6">Dashboard Administrativo</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            
            <div class="bg-white p-6 rounded-lg shadow-xl">
                <h2 class="text-xl font-semibold mb-3 flex items-center gap-2"><i class="fa-solid fa-cake-candles text-pink-500"></i> Aniversariantes (<span id="count-aniversariantes">0</span>)</h2>
                <ul id="list-aniversariantes" class="space-y-2 text-sm h-32 overflow-y-auto">
                    <li class="text-gray-500">Nenhum aniversariante encontrado.</li>
                </ul>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-xl">
                <h2 class="text-xl font-semibold mb-3 flex items-center gap-2"><i class="fa-solid fa-plane-departure text-teal-500"></i> Férias Próximas (<span id="count-ferias">0</span>)</h2>
                <ul id="list-ferias" class="space-y-2 text-sm h-32 overflow-y-auto">
                    <li class="text-gray-500">Nenhuma férias agendada. (Aguardando implementação)</li>
                </ul>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-xl">
                <h2 class="text-xl font-semibold mb-3 flex items-center gap-2"><i class="fa-solid fa-hourglass-end text-amber-500"></i> Ajuste Banco de Horas (Mês)</h2>
                <div id="list-banco-horas-ajuste" class="space-y-2 text-sm h-32 overflow-y-auto">
                    <p class="text-gray-500">Nenhum ajuste pendente esta semana. (Aguardando implementação)</p>
                </div>
            </div>
        </div>
        
        <div class="bg-white p-6 rounded-lg shadow-xl mb-6">
            <h2 class="text-xl font-semibold mb-4">Situação do Banco de Horas Detalhado</h2>
            <p class="text-gray-500">Em desenvolvimento.</p>
        </div>
    </template>
    
    <template id="employee-form-fields">
        <div class="mb-4">
            <label for="admissao" class="block text-sm font-medium text-gray-700">Data de Admissão</label>
            <input type="date" id="admissao" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
        </div>
        
        <div class="md:col-span-2 mt-4 p-4 border rounded-lg bg-yellow-50">
            <h3 class="text-lg font-semibold mb-3">Critérios de Batida de Ponto</h3>
            
            <div class="flex items-center mb-3">
                <input id="selfie-obrigatoria" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="selfie-obrigatoria" class="ml-2 block text-sm text-gray-900">Exigir Selfie Obrigatória</label>
            </div>

            <label class="block text-sm font-medium text-gray-700 mb-1">Batidas Padrão na Jornada</label>
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex items-center">
                    <input id="batidas-2" name="batidas-padrao" type="radio" value="2" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                    <label for="batidas-2" class="ml-2 block text-sm text-gray-900">2 Batidas (Início/Fim)</label>
                </div>
                <div class="flex items-center">
                    <input id="batidas-4" name="batidas-padrao" type="radio" value="4" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                    <label for="batidas-4" class="ml-2 block text-sm text-gray-900">4 Batidas (Início, Pausa, Retorno, Fim)</label>
                </div>
            </div>
        </div>
        </template>


    <template id="reports-template">
        <h1 class="text-3xl font-bold mb-6">Relatórios & Ponto</h1>

        <div class="bg-white p-6 rounded-lg shadow-xl mb-6 no-print">
            <h2 class="text-xl font-semibold mb-4">Seleção de Relatórios em Lote</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                
                <div class="col-span-1">
                    <label for="report-filter-estado" class="block text-sm font-medium text-gray-700">Filtrar por Estado</label>
                    <select id="report-filter-estado" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 bg-gray-50">
                        <option value="all">Todos</option>
                    </select>
                </div>
                <div class="col-span-1">
                    <label for="report-filter-cargo" class="block text-sm font-medium text-gray-700">Filtrar por Cargo</label>
                    <select id="report-filter-cargo" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 bg-gray-50">
                        <option value="all">Todos</option>
                    </select>
                </div>
                
                <div class="col-span-1">
                    <label for="report-month" class="block text-sm font-medium text-gray-700">Mês do Relatório</label>
                    <input type="month" id="report-month" value="" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 bg-gray-50">
                </div>

                <div class="col-span-1">
                     <button onclick="loadEmployeesForReports()" class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-700"><i class="fa-solid fa-magnifying-glass"></i> Buscar Colaboradores</button>
                </div>
            </div>
        </div>

        <div id="report-employees-list" class="bg-white p-6 rounded-lg shadow-xl mb-6 hidden">
            <h3 class="text-lg font-semibold mb-3">Colaboradores Encontrados</h3>
            <div class="flex justify-between items-center mb-3">
                <label class="flex items-center">
                    <input type="checkbox" id="select-all-reports" onclick="document.querySelectorAll('.report-checkbox').forEach(cb => cb.checked = this.checked)" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                    <span class="ml-2 text-sm font-medium text-gray-700">Selecionar Todos</span>
                </label>
                <button onclick="generateBatchReports()" class="bg-green-500 text-white p-2 rounded hover:bg-green-700 disabled:opacity-50" id="btn-generate-batch">
                    <i class="fa-solid fa-file-export"></i> Gerar Relatórios em Lote
                </button>
            </div>
            
            <div class="overflow-x-auto max-h-96">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="py-2 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10">Sel.</th>
                            <th class="py-2 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                            <th class="py-2 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cargo</th>
                            <th class="py-2 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider no-print">Ação Individual</th>
                        </tr>
                    </thead>
                    <tbody id="report-employee-table-body" class="bg-white divide-y divide-gray-200">
                        </tbody>
                </table>
            </div>
        </div>
    </template>
    
    <script type="module" src="script.js"></script>
</body>
</html>